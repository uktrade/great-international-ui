{% extends 'core/base_cms.html' %}
{% load static from staticfiles %}
{% load i18n %}
{% get_current_language as LANGUAGE %}
{% load filter_by_active_language from cms_tags %}
{% load card hero add_export_elements_classes render_form override_elements_css_class from directory_components_tags %}

{% block css_layout_class %}landing-page{% endblock %}

{% block head_js %}
	{{ block.super }}
	<script src="{% static 'js/dit.tariffsCountrySelector.js' %}"></script>
{% endblock %}

{% block content %}

{% include 'core/includes/hero_landing_page.html' with heading=page.hero_title img_url=page.hero_image.url subtitle=page.hero_subtitle call_to_action_text=page.hero_cta_text %}

<section class="padding-vertical-60">
	<div class="container">
		<div class="card-grid">
			<div class="column-half">
				<div class="card">
					<figure>
						<img class="width-full" src="{{ page.invest_image.url }}">
					</figure>
					<div>
						<h2 class="highlight heading-medium background-active-blue white-text margin-top-remove-30">{{ page.invest_title }}</h2>
						<div class="card-inner">
							{{ page.invest_content|add_export_elements_classes|override_elements_css_class:'a, link with-arrow'|safe }}
						</div>
					</div>
				</div>
			</div>
			<div class="column-half">
				<div class="card">
					<figure>
						<img class="width-full" src="{{ page.trade_image.url }}">
					</figure>
					<div>
						<h2 class="highlight heading-medium background-active-blue white-text margin-top-remove-30">{{ page.trade_title }}</h2>
						<div class="card-inner">
							{{ page.trade_content|add_export_elements_classes|override_elements_css_class:'a, link with-arrow'|safe }}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

{% if features.INTERNATIONAL_TARIFFS_ON %}
	<section id="tariffs-section" class="tariffs-section background-stone-40">
		<div class="container">
			<div class="grid-row" >
				<div class="column-full column-half-l margin-vertical-90 tariffs-image">
					<img class="width-100" src="{{ page.tariffs_image.url }}" alt="">
				</div>
				<div class="column-full column-half-l margin-vertical-90 tariffs-content-wrapper">
					<div class="padding-horizontal-45 wrap-tight tariffs-content">
						<h2 class="heading-large">{{ page.tariffs_title }}</h2>
						{{ page.tariffs_description|add_export_elements_classes }}
						{% if features.INTERNATIONAL_TARIFFS_COUNTRY_SELECT_ON %}
							<form class="form-group country-selector-dialog" action="{{ page.tariffs_link }}" method="GET">
								<div class="select-container background-white margin-bottom-30">
								  {% if country %}
									<span id="tariffs-flag-container" class="js-enabled-only flag-icon flag-icon-{{ tariffs_country.code }}"></span>
								  {% endif %}
								  <div class="country-select{% if page.country_selector_form.country.errors %} form-group-error{% endif %}" >
									{% if tariffs_country_selector_form.tariffs_country.label %}{{ tariffs_country_selector_form.tariffs_country.label_tag }}{% endif %}
									{% if tariffs_country_selector_form.tariffs_country.errors %}
									  <span class="error-message">{{ tariffs_country_selector_form.tariffs_country.errors }}</span>
									{% endif %}
									{% if tariffs_country_selector_form.tariffs_country.help_text %}
									  <span class="form-hint">{{ tariffs_country_selector_form.tariffs_country.help_text }}</span>
									{% endif %}
									{{ tariffs_country_selector_form.tariffs_country }}
								  </div>
								</div>
								<button class="button button-blue" type="submit">Continue</button>
							</form>
						{% else %}
							<form class="button-container" action="{{ page.tariffs_link }}" >
								<button class="button button-blue button-arrow-small" >Continue</button>
							</form>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</section>
{% endif %}

{% with page.related_pages|filter_by_active_language as related_pages %}
{% if related_pages %}
<section id="news-events-section" class="news-events-section padding-vertical-60">
  <div class="container wrap-tight">
    <h2 class="heading-large margin-bottom-45">{{ page.news_title }}</h2>
    <div class="card-grid">
      {% for related_page in related_pages %}
      	{% if related_page.page_type == 'InternationalArticlePage' %}
        	{% include 'core/includes/featured_article_card.html' with url=related_page.full_url default_subheading="Article" %}
		{% else %}
			{% url 'campaign' related_page.meta.slug as campaign_url %}
		    {% include 'core/includes/featured_article_card.html' with url=campaign_url default_subheading="Campaign"  %}
		{% endif %}
      {% endfor %}
    </div>
  </div>
</section>
{% endif %}
{% endwith %}
{% endblock content %}

{% block content_after %}
<section class="background-great-blue study-visit-cta-section" id="study-visit-cta-section">
  <div class="container padding-vertical-30">
    <div class="grid-row">
      <div class="column-full column-half-l column-third-xl">
        <a href="https://study-uk.britishcouncil.org/" rel="noopener noreferrer" target="_blank" class="button button-ghost-white button-arrow">{{ page.study_in_uk_cta_text }}</a>
      </div>
      <div class="column-full column-half-l column-third-xl">
        <a href="https://www.visitbritain.com/gb/en" rel="noopener noreferrer" target="_blank" class="button button-ghost-white button-arrow">{{ page.visit_uk_cta_text }}</a>
      </div>
    </div>
  </div>
</section>
{% endblock %}
