{% extends 'core/base_cms.html' %}
{% load static from staticfiles %}
{% load i18n %}
{% get_current_language as LANGUAGE %}
{% load filter_by_active_language from cms_tags %}
{% load card hero add_export_elements_classes render_form override_elements_css_class from directory_components_tags %}

{% block css_layout_class %}landing-page{% endblock %}

{% block head_js %}
  {{ block.super }}
  <script src="{% static 'js/dit.tariffsCountrySelector.js' %}"></script>
{% endblock %}

{% block content %}

{% include 'directory_components/hero_with_cta.html' with heading=page.hero_title subheading=page.hero_subtitle img_url=page.hero_image.url cta_text=page.hero_cta_text cta_link=page.hero_cta_link %}

<section class="padding-vertical-60 landing-page-section">
  <div class="container">
    <div class="card-grid">
      <div class="column-half">
        <div class="card cta-image-card">
          <img class="width-full" src="{{ page.invest_image.url }}">
          <div class="card-text">
            <h2 class="highlight heading-large background-active-blue white-text">{{ page.invest_title }}</h2>
            <div class="padding-30">
              {{ page.invest_content|add_export_elements_classes|override_elements_css_class:'a, link with-arrow'|safe }}
            </div>
          </div>
        </div>
      </div>
      <div class="column-half">
        <div class="card cta-image-card">
          <img class="width-full" src="{{ page.trade_image.url }}">
          <div class="card-text">
            <h2 class="highlight heading-large background-active-blue white-text">{{ page.trade_title }}</h2>
            <div class="padding-30">
              {{ page.trade_content|add_export_elements_classes|override_elements_css_class:'a, link with-arrow'|safe }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{% if features.INTERNATIONAL_TARIFFS_ON %}
<section id="tariffs-section" class="tariffs-section landing-page-section">
	<div class="container">
		<div class="grid-row" >
			<div class="column-full column-half-l margin-vertical-60 tariffs-image">
				<img class="width-100" src="{{ page.tariffs_image.url }}" alt="">
			</div>
			<div class="column-full column-half-l margin-vertical-60 tariffs-content-wrapper">
				<div class="padding-horizontal-45 wrap-tight tariffs-content">
					<h2 class="heading-large ">{{ page.tariffs_title }}</h2>
					{{ page.tariffs_description|add_export_elements_classes }}
						{% if features.INTERNATIONAL_TARIFFS_COUNTRY_SELECT_ON %}
							<form class="country-selector-dialog" action="{{ page.tariffs_link }}" method="GET">
								<div class="select-container background-white margin-bottom-30">
									{% if country %}
										<span id="tariffs-flag-container" class="js-enabled-only flag-icon flag-icon-{{ tariffs_country.code }}"></span>
									{% endif %}
									<div class="country-select{% if page.country_selector_form.country.errors %} form-group-error{% endif %}" >
										{% if tariffs_country_selector_form.tariffs_country.label %}
											{{ tariffs_country_selector_form.tariffs_country.label_tag }}
										{% endif %}

										{% if tariffs_country_selector_form.tariffs_country.errors %}
											<span class="error-message">{{ tariffs_country_selector_form.tariffs_country.errors }}</span>
										{% endif %}

										{% if tariffs_country_selector_form.tariffs_country.help_text %}
											<span class="form-hint">{{ tariffs_country_selector_form.tariffs_country.help_text }}</span>
										{% endif %}

										{{ tariffs_country_selector_form.tariffs_country }}
									</div>
								</div>
								<button class="button button-blue" type="submit">Continue</button>
							</form>
						{% else %}
							<div class="button-container padding-top-30">
								<a href="{{ page.tariffs_link }}" class="button button-blue button-arrow-small">Continue</a>
							</div>
						{% endif %}
				</div>
			</div>
		</div>
	</div>
</section>
{% endif %}

{% with page.related_pages|filter_by_active_language as related_pages %}
{% if related_pages %}
<section id="news-events-section" class="news-events-section padding-vertical-60 landing-page-section">
		<div class="container wrap-tight">
		<h2 class="heading-large margin-bottom-45">{{ page.news_title }}</h2>
			<div class="card-grid">
			{% for related_page in related_pages %}
				{% if related_page.page_type == 'InternationalArticlePage' %}
					{% include 'core/includes/featured_article_card.html' with url=related_page.full_url default_subheading="Article" %}
				{% else %}
					{% url 'campaign' related_page.meta.slug as campaign_url %}
					{% include 'core/includes/featured_article_card.html' with url=campaign_url default_subheading="Campaign"  %}
				{% endif %}
			{% endfor %}
			</div>
		</div>
	</section>
{% endif %}
{% endwith %}
{% endblock content %}

{% block content_after %}
<section class="background-great-blue study-visit-cta-section" id="study-visit-cta-section">
  <div class="container padding-vertical-30">
    <div class="grid-row">
      <div class="column-full column-half-l column-third-xl">
        <a href="https://study-uk.britishcouncil.org/" rel="noopener noreferrer" target="_blank" class="button button-ghost-white button-arrow">{{ page.study_in_uk_cta_text }}</a>
      </div>
      <div class="column-full column-half-l column-third-xl">
        <a href="https://www.visitbritain.com/gb/en" rel="noopener noreferrer" target="_blank" class="button button-ghost-white button-arrow">{{ page.visit_uk_cta_text }}</a>
      </div>
    </div>
  </div>
</section>
{% endblock %}
