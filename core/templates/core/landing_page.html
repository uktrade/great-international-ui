{% extends 'core/base_cms.html' %}
{% load static from staticfiles %}
{% load i18n %}
{% get_current_language as LANGUAGE %}
{% load filter_by_active_language from cms_tags %}
{% load card hero add_export_elements_classes render_form override_elements_css_class cta_card from directory_components_tags %}

{% block css_layout_class %}landing-page{% endblock %}

{% block head_js %}
  {{ block.super }}
  <script src="{% static 'js/dit.tariffsCountrySelector.js' %}"></script>
{% endblock %}

{% block content %}

{% include 'core/includes/hero_landing_page.html' with heading=page.hero_title subtitle=page.hero_subtitle img_url=page.hero_image.url cta_text=page.hero_cta_text cta_link=page.hero_cta_link %}

<section id="featured-cards-section" class="featured-cards-section padding-vertical-60 landing-page-section">
  <div class="container">
    <div class="card-grid">
      <div class="column-half">
        <div class="card cta-image-card" data-ga-class="large-feature">
          <img class="width-full" src="{{ page.invest_image.url }}" alt="">
          <div class="card-text margin-top-negative-30">
            <h2 class="highlight heading-large background-active-blue white-text">{{ page.invest_title }}</h2>
            <div class="padding-30">
              {{ page.invest_content|add_export_elements_classes|override_elements_css_class:'a, link with-arrow'|safe }}
            </div>
          </div>
        </div>
      </div>
      <div class="column-half">
        <div class="card cta-image-card" data-ga-class="large-feature">
          <img class="width-full" src="{{ page.trade_image.url }}" alt="">
          <div class="card-text margin-top-negative-30">
            <h2 class="highlight heading-large background-active-blue white-text">{{ page.trade_title }}</h2>
            <div class="padding-30">
              {{ page.trade_content|add_export_elements_classes|override_elements_css_class:'a, link with-arrow'|safe }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="features-highlight-section" class="features-highlight-section landing-page-section">
  <div class="container">
    <div class="grid-row">
      <div class="column-full column-two-thirds-m column-half-l">
        <h2 class="heading-large margin-top-0">{{ page.section_two_heading }}</h2>
        <p>{{ page.section_two_teaser }}</p>
      </div>
    </div>
    <div class="grid-row">
      {% for subsection in page.section_two_subsections %}
        <div class="column-full column-third-l">
          <img class="features-highlight-icon" src="{{ subsection.icon.url }}"/>
          <h3 class="heading-medium margin-top-15">{{ subsection.heading }}</h3>
          <p class="font-xsmall">{{ subsection.body }}</p>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% if features.INTERNATIONAL_TARIFFS_ON %}
<section id="tariffs-section" class="tariffs-section landing-page-section">
	<div class="container">
		<div class="grid-row" >
			<div class="column-full column-half-l margin-vertical-60 tariffs-image">
				<img class="width-full" src="{{ page.tariffs_image.url }}" alt="">
			</div>
			<div class="column-full column-half-l margin-vertical-60 tariffs-content-wrapper">
				<div class="padding-horizontal-45 wrap-tight tariffs-content">
					<h2 class="heading-large ">{{ page.tariffs_title }}</h2>
					{{ page.tariffs_description|add_export_elements_classes }}
						{% if features.INTERNATIONAL_TARIFFS_COUNTRY_SELECT_ON %}
							<form class="country-selector-dialog" action="{{ page.tariffs_link }}" method="GET">
								<div class="select-container background-white margin-bottom-30">
									{% if country %}
										<span id="tariffs-flag-container" class="js-enabled-only flag-icon flag-icon-{{ tariffs_country.code }}"></span>
									{% endif %}
									<div class="country-select{% if page.country_selector_form.country.errors %} form-group-error{% endif %}" >
										{% if tariffs_country_selector_form.tariffs_country.label %}
											{{ tariffs_country_selector_form.tariffs_country.label_tag }}
										{% endif %}

										{% if tariffs_country_selector_form.tariffs_country.errors %}
											<span class="error-message">{{ tariffs_country_selector_form.tariffs_country.errors }}</span>
										{% endif %}

										{% if tariffs_country_selector_form.tariffs_country.help_text %}
											<span class="form-hint">{{ tariffs_country_selector_form.tariffs_country.help_text }}</span>
										{% endif %}

										{{ tariffs_country_selector_form.tariffs_country }}
									</div>
								</div>
								<button class="button button-blue" type="submit">Continue</button>
							</form>
						{% else %}
							<div class="button-container padding-top-30">
								<a href="{{ page.tariffs_link }}" class="button button-blue button-arrow-small">Continue</a>
							</div>
						{% endif %}
				</div>
			</div>
		</div>
	</div>
</section>
{% endif %}

{% if page.featured_links %}
<section id="featured-links-section" class="featured-links-section landing-page-section">
  <div class="container">
    <div class="grid-row">
      <div class="column-full column-two-thirds-m column-half-l">
        <h2 class="heading-large margin-top-0">{{ page.featured_links_title }}</h2>
        <p>{{ page.featured_links_summary }}</p>
      </div>
    </div>
    <div class="card-grid">
      <div class="column-third-xl column-half-l column-full">
        {% url 'industries' as discover_uk_industries_url %}
        {% cta_card with_arrow=True url=discover_uk_industries_url image_url=page.featured_links.0.image.url text=page.featured_links.0.heading %}
      </div>
      <div class="column-third-xl column-half-l column-full">
        {% cta_card with_arrow=True url=services_urls.invest image_url=page.featured_links.1.image.url text=page.featured_links.1.heading %}
      </div>
      <div class="column-third-xl column-half-l column-full">
        {% cta_card with_arrow=True url=services_urls.contact_us image_url=page.featured_links.2.image.url text=page.featured_links.2.heading %}
      </div>
    </div>
  </div>
</section>
{% endif %}

{% with page.related_pages|filter_by_active_language as related_pages %}
{% if related_pages %}
<section id="news-events-section" class="news-events-section padding-vertical-60 landing-page-section">
  <div class="container wrap-tight">
		<h2 class="heading-large margin-bottom-45">{{ page.news_title }}</h2>
    <div class="card-grid">
    {% for related_page in related_pages %}
      {% if related_page.page_type == 'InternationalArticlePage' %}
        {% include 'core/includes/featured_article_card.html' with url=related_page.meta.url default_subheading="Article" %}
      {% else %}
        {% include 'core/includes/featured_article_card.html' with url=related_page.meta.url default_subheading="Campaign" %}
      {% endif %}
    {% endfor %}
    </div>
  </div>
</section>
{% endif %}
{% endwith %}
{% endblock content %}

{% block content_after %}
<section id="study-visit-cta-section" class="background-great-blue study-visit-cta-section">
  <div class="container padding-vertical-30">
    <div class="grid-row">
      <div class="column-full column-half-l column-third-xl">
        <a href="https://study-uk.britishcouncil.org/" rel="noopener noreferrer" target="_blank" class="button button-ghost-white button-arrow">{{ page.study_in_uk_cta_text }}</a>
      </div>
      <div class="column-full column-half-l column-third-xl">
        <a href="https://www.visitbritain.com/gb/en" rel="noopener noreferrer" target="_blank" class="button button-ghost-white button-arrow">{{ page.visit_uk_cta_text }}</a>
      </div>
    </div>
  </div>
</section>
{% endblock %}
